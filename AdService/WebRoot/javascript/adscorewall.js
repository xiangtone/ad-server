var pageNo=1;var pageCount=0;var pageSize=10;var signPageCount=0;var signPageNo=1;var ids;var recoIds;var signStatus;var currPageType=0;var isBottom=true;var perString;var isSignData=false;var backReco;var xmlhttp;function requestLogData(g,b,c,a){var f=""+window.pvparam.pvParam(g,b,c,a);f=f.replace(/\+/g,"%2B");f=f.replace(/\&/g,"%26");try{xmlhttp=new XMLHttpRequest()}catch(d){xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}xmlhttp.open("post",serverUrl+"android/motion.do?m="+f,true);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.send("")}function requestData(pageType,isSign,catagory){currPageType=catagory;var params="";var controller="";if(catagory==0){controller="android/ad_picker.do";params=""+window.dataparam.wallParam(pageSize,pageNo,pageType,isSign)}else{if(catagory==1){controller="android/ad_picker.do";params=window.notifyParam.getNotifyParam(pageSize,signPageNo,0,"track")}}params=params.replace(/\+/g,"%2B");params=params.replace(/\&/g,"%26");try{xmlhttp=new XMLHttpRequest()}catch(e){xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}xmlhttp.open("post",serverUrl+controller+"?m="+params,true);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState){if(200==xmlhttp.status){var data=eval("("+xmlhttp.responseText+")");if(catagory==0){scoreWall(data)}else{if(catagory==1){scoreSignWall(data)}}}else{window.remove.removeLoadingView()}}};xmlhttp.send("")}function dataUndefined(a){if(a.data.adList==undefined){window.remove.removeLoadingView();return}}function scoreSignWall(d){dataUndefined(d);window.remove.removeLoadingView();signPageCount=d.data.wallPage.pageCount;signStatus=d.data.sign.sign_status;var c=d.data.adList;ids="";if(c.length>0){for(var b in c){var a=(signPageNo-1)*pageSize+parseInt(b);drawItem2(a,c[b],1);if(b==(c.length-1)){ids=ids+c[b].id}else{ids=ids+c[b].id+","}}}else{if(signPageNo==1){document.getElementById("itemtitle2").style.display=""}}signPageNo++;if(c.length>0){requestLogData("",ids,6,0)}}function scoreWall(e){dataUndefined(e);window.remove.removeLoadingView();var b=document.getElementById("listheader");b.style.position="fixed";pageCount=e.data.wallPage.pageCount;signStatus=e.data.sign.sign_status;var d=e.data.adList;ids="";if(d.length>0){for(var c in d){var a=(pageNo-1)*pageSize+parseInt(c);drawItem(a,d[c],0);if(c==(d.length-1)){ids=ids+d[c].id}else{ids=ids+d[c].id+","}}}else{if(pageNo==1){document.getElementById("itemtitle1").style.display=""}}pageNo++;if(d.length>0){requestLogData("",ids,6,0)}}var unit;function drawItem(g,o,e){if(g==0){var m=document.getElementById("free_bonus");m.innerHTML="免费获取"+o.general.scoreUnit;unit=o.general.scoreUnit}var d=document.createElement("div");d.setAttribute("class","box");d.setAttribute("id","box"+g);var l=document.createElement("div");l.setAttribute("class","boxLM");l.setAttribute("id","boxLM"+g);var r=document.createElement("div");r.setAttribute("class","boxL");r.setAttribute("id","boxL");var n=document.createElement("img");n.setAttribute("class","logo");n.setAttribute("src",o.general.wall_icon_Url);n.onerror=function(){this.src="../images/android_defaultlogo.png"};r.appendChild(n);var c=document.createElement("div");c.setAttribute("class","boxM");c.setAttribute("id","boxM");if(o.isDownload!=-1){c.innerHTML="<div id='title"+g+"' class='title'>"+o.title+"</div><div id='desc"+g+"' class='desc'>"+o.general.wall_desc+"</div>"}else{c.innerHTML="<div id='title"+g+"' class='title'>"+o.title+"</div><div id='desc"+g+"' class='desc_sign_sign'>隔日签到，获取额外奖励</div>"}l.addEventListener("click",function(){gotoDetail(parseInt(o.id),o.ad_type,o.ad_url,o.title,e,g)},false);var p=document.createElement("div");p.setAttribute("class","boxR");p.setAttribute("id","boxR"+g);var j=document.createElement("div");var h=document.createElement("div");h.setAttribute("id","downTop"+g);h.setAttribute("class","downTop");h.innerHTML="<span class='downloadplus'>+</span><span class='downjifen'>"+o.general.score+"</span>";j.appendChild(h);var a=document.createElement("div");a.setAttribute("class","downMiddle");a.setAttribute("id","downMiddle"+g);a.innerHTML="<div class='downjinbi'></div>";j.appendChild(a);var i=document.createElement("div");i.setAttribute("class","downBottom");i.setAttribute("id","downBottom"+g);i.innerHTML="<div class='downbgroung' id='downbgroung"+g+"'></div><div class='downsecond' id='downsecond"+g+"'></div><div class='downfront' id='downfront"+g+"'><span id='freeword"+g+"' class='freeword'></span></div>";j.appendChild(i);p.appendChild(j);i.addEventListener("click",function(){downloadFile(o.ad_type,o.ad_url,o.resourceUrl,parseInt(o.id),o.title,o.packageName,o.resourceSize,o.isDownload,g,e,o.fileName)},false);l.appendChild(r);l.appendChild(c);d.appendChild(l);d.appendChild(p);var k=document.createElement("div");k.setAttribute("class","divider_up");var f=document.createElement("div");f.setAttribute("class","divider_bottom");var q=parseInt(g)+parseInt(1);if(e==0){f.setAttribute("id","divider"+q)}else{if(e==1){f.setAttribute("id","signDivider"+q)}}d.appendChild(k);d.appendChild(f);var b=document.getElementById("wallList");b.appendChild(d);rightWall(e,o.packageName,o.isDownload,o.resourceSize,o.fileName,o.ad_type,g)}function drawItem2(h,l,f){var c=document.createElement("div");c.setAttribute("class","box");c.setAttribute("id","box2"+h);var o=document.createElement("div");o.setAttribute("class","boxLM");o.setAttribute("id","boxLM2"+h);var b=document.createElement("div");b.setAttribute("class","boxL");b.setAttribute("id","boxL2");var p=document.createElement("img");p.setAttribute("class","logo");p.setAttribute("src",l.general.wall_icon_Url);p.onerror=function(){this.src="../images/android_defaultlogo.png"};b.appendChild(p);var m=document.createElement("div");m.setAttribute("class","boxM");m.setAttribute("id","boxM2");if(l.isDownload!=-1&&(parseInt(signStatus)+1)>=l.isDownload){m.innerHTML="<div class='boxm_top'><div id='title2"+h+"' class='title_sign'>"+l.title+"</div></div><div id='descsign2"+h+"' class='desc_sign_sign'>隔日签到，获取额外奖励</div>"}else{m.innerHTML="<div class='boxm_top'><div id='title2"+h+"' class='title_sign'>"+l.title+"</div><div id='title_jinbi2"+h+"' class='title_jinbi'></div></div><div id='descsign2"+h+"' class='desc_sign'>"+l.general.wall_desc+"</div>"}o.addEventListener("click",function(){gotoDetail(parseInt(l.id),l.ad_type,l.ad_url,l.title,f,h)},false);var j=document.createElement("div");j.setAttribute("class","boxR");j.setAttribute("id","boxR2"+h);var d=document.createElement("div");var i=document.createElement("div");i.setAttribute("class","downbottom_sign");i.setAttribute("id","downBottom2"+h);var g=document.createElement("div");g.setAttribute("class","downMiddle2");g.setAttribute("id","downMiddle22"+h);g.innerHTML="<div class='downjinbi2'><span class='downloadplus'>+</span><span class='downjinbi2'>"+l.general.score+"</span></div>";d.appendChild(g);i.innerHTML="<div class='downbgroung' id='downbgroungsign2"+h+"'></div><div class='downsecond' id='downsecondsign2"+h+"'></div><div class='downfront' id='downfront2"+h+"'><span id='freewordsign2"+h+"' class='freeword'></span></div>";d.appendChild(i);j.appendChild(d);i.addEventListener("click",function(){downloadFile(l.ad_type,l.ad_url,l.resourceUrl,parseInt(l.id),l.title,l.packageName,l.resourceSize,l.isDownload,h,f,l.fileName)},false);o.appendChild(b);o.appendChild(m);c.appendChild(o);c.appendChild(j);var n=document.createElement("div");n.setAttribute("class","divider_up");var k=document.createElement("div");k.setAttribute("class","divider_bottom");var e=parseInt(h)+parseInt(1);k.setAttribute("id","signDivider2"+e);c.appendChild(n);c.appendChild(k);var a=document.getElementById("wallList2");a.appendChild(c);rightWall(f,l.packageName,l.isDownload,l.resourceSize,l.fileName,l.ad_type,h)}function rightWall(g,a,j,f,e,b,h){var d;if(g==0){d=document.getElementById("freeword"+h)}else{if(g==1){d=document.getElementById("freewordsign2"+h)}}if(g==0){if(b==1){d.innerHTML="打开"}else{if(signStatus>0){if(window.installed.isInstalled(a)){if(j==-1||(j!=0&&(parseInt(signStatus)+1)>=j)){d.innerHTML="签到"}else{d.innerHTML="打开"}}else{if(j==-1||(j!=0&&(parseInt(signStatus)+1)>=j)){d.innerHTML="签到"}else{if(j==0){if(window.loaded.isLoaded(f,e)){var i=document.getElementById("downsecond"+h);if(i){i.style.width="80%"}d.innerHTML="安装"}else{d.innerHTML="免费下载"}}else{d.innerHTML="已激活"}}}}else{if(j==0){if(window.loaded.isLoaded(f,e)){var i=document.getElementById("downsecond"+h);if(i){i.style.width="80%"}d.innerHTML="安装"}else{d.innerHTML="免费下载"}}else{if(window.installed.isInstalled(a)){d.innerHTML="打开"}else{d.innerHTML="已激活"}}}}}else{if(g==1){if(b==1){d.innerHTML="打开"}else{if(signStatus>0){if(window.installed.isInstalled(a)){if(j==-1||(j!=0&&(parseInt(signStatus)+1)>=j)){d.innerHTML="签到"}else{var c=document.getElementById("downbgroungsign2"+h);if(c){d.innerHTML="打开"}}}else{if(j==-1||(j!=0&&(parseInt(signStatus)+1)>=j)){d.innerHTML="签到"}else{var c=document.getElementById("downbgroungsign2"+h);if(c){d.innerHTML="打开"}}}}}}}}var oldIndex=-1;var oldSignedIndex=-1;var oldDefaultSignIndex=-1;function downloadFile(d,m,b,c,o,a,j,n,l,k,i){if(k==0||k==1||k==3){if(d==1){window.location.href=m;requestLogData(c,"",5,0)}else{if(window.installed.isInstalled(a)){window.open.openApp(a);if(n!=0&&n!=-1&&(parseInt(signStatus)+1)>=n){if(k==0){if(oldIndex!=l){oldIndex=l;var f=document.getElementById("freeword"+l);if(f){f.innerHTML="签到"}window.score.addScore(c)}}else{if(k==1){if(oldSignedIndex!=l){oldSignedIndex=l;if(n==2){var e=document.getElementById("title_jinbi2"+l);if(e){e.style.display="none"}var g=document.getElementById("freewordsign2"+l);if(g){g.innerHTML="打开"}}window.score.addScore(c)}}}}}else{var h=0+","+l+","+k;var f;if(k==0){if(!window.loaded.isLoaded(j,i)){f=document.getElementById("freeword"+l);if(f){f.innerHTML="下载中"}}}else{if(k==1){if(!window.loaded.isLoaded(j,i)){f=document.getElementById("freewordsign2"+l);if(f){f.innerHTML="下载中"}}}}window.wall.clickOnAndroid(b,c,o,a,h,j,n,signStatus);requestLogData(c,"",5,0)}}}}function gotoDetail(e,d,c,g,f,b){if(!window.isNetwork.hasNetwork()){winodw.toast.toast("网络异常");return}if(d==0){var a;if(f==0||f==1||f==3){a=serverUrl+"html/scoredetail.html?adId="+e+"&signstatus="+signStatus+"&title="+g+"&pagetype=0&position="+b+"&catagory="+f}else{a=serverUrl+"html/scoredetail.html?adId="+e+"&signstatus="+signStatus+"&title="+g+"&pagetype=6&position="+b+"&catagory="+f}window.loading.addLoadingView(3);document.body.scrollTop=0;window.location.href=a}else{window.loading.addLoadingView(3);document.body.scrollTop=0;window.location.href=adUrl}}window.onscroll=function(){if(isBottom){if((document.body.scrollHeight-(document.documentElement.clientHeight+document.body.scrollTop))==0){if(currPageType==0){if(pageNo<=pageCount){window.loading.addLoadingView(0);requestData(0,0,0)}}else{if(currPageType==1){if(signPageNo<=signPageCount){window.loading.addLoadingView(0);requestData(0,1,1)}}}}}};function backDefault(a,c){if(c==0){var e=document.getElementById("downbgroung"+a);if(e){var d=document.getElementById("freeword"+a)}if(d){d.innerHTML="免费下载"}}else{if(c==1){var e=document.getElementById("downbgroungsign"+a);if(e){var b=document.getElementById("freewordsign"+a)}if(b){b.innerHTML="免费下载"}}}}function updateWord(a,b){if(b){b.innerHTML="安装"}}function changeState(f,i,d){if(d==0){var g=document.getElementById("downsecond"+f);if(g){g.style.width="0"}var j=document.getElementById("downbgroung"+f);if(j){var k=document.getElementById("freeword"+f)}if(k){k.innerHTML="签到"}var c=document.getElementById("num");c.style.display="none";var e=document.getElementById("desc"+f);if(e){e.innerHTML="隔日签到，获取额外奖励";e.style.color="#ec6941"}}else{if(d==1){var a=getClickedItem(f,d);if(a!=""&&a.split(",")[0]==2){var b=document.getElementById("title_jinbi"+f);if(b){b.style.display="none"}var l=document.getElementById("freewordsign"+f);if(l){l.innerHTML="打开"}var h=document.getElementById("desc_sign"+f);if(h){h.innerHTML=a.split(",")[1]}}}}}function switchChange(a){if(a){if(!window.isNetwork.hasNetwork()){window.toast.toast("网络异常");return}document.getElementById("wallList").style.display="block";document.getElementById("wallList2").style.display="none";document.getElementById("item_bottom_notify").style.display="none";document.getElementById("item_bottom").style.display="block";document.getElementById("left").style.color="white";document.getElementById("right").style.color="#bfbfbf";document.getElementById("itemtitle2").style.display="none";isSignData=false;isBottom=true;currPageType=0;if(pageNo==1){requestData(0,0,0)}}else{if(!window.isNetwork.hasNetwork()){window.toast.toast("网络异常");return}document.getElementById("left").style.color="#bfbfbf";document.getElementById("right").style.color="white";document.getElementById("wallList").style.display="none";document.getElementById("wallList2").style.display="block";document.getElementById("item_bottom_notify").style.display="block";document.getElementById("item_bottom").style.display="none";document.getElementById("itemtitle1").style.display="none";isSignData=true;isBottom=true;if(signPageNo==1){window.loading.addLoadingView(0);requestData(0,1,1)}}}Date.prototype.format=function(b){var c={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(b)){b=b.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var a in c){if(new RegExp("("+a+")").test(b)){b=b.replace(RegExp.$1,RegExp.$1.length==1?c[a]:("00"+c[a]).substr((""+c[a]).length))}}return b};var storage=window.localStorage;function getClickedItem(a,c){var h=window.sessionStorage;var f;if(h){for(var b=0;b<h.length;b++){var g=h.key(b);var e=h.getItem(g).split(",")[4];var d=h.getItem(g).split(",")[5];if(a==e&&c==d){f=h.getItem(g).split(",")[6]+","+h.getItem(g).split(",")[7];break}}}return f}function goBack(){window.back.backToActivity()}function loadData(){window.loading.addLoadingView(0);document.getElementById("item_bottom_notify").style.display="none";requestData(0,0,0)};