var signstatus;var paramId;var isPop=false;var pagetype;var catagoryWall;var positionWall;var isSigned=false;var perString;var xmlhttp;function senfe(){var k=1.2;var g=8;var i=document.getElementById("extendImage");var c=document.getElementById("bbb");var j=parseInt(c.offsetHeight);var d=parseInt(c.scrollHeight);var a=j;if(c.getAttribute("oldHeight")==null){c.setAttribute("oldHeight",j)}var b=Math.ceil(c.getAttribute("oldHeight"));var e=function(){if(j<d){i.src="../images/android_shouqi.png";if(a<d){a=Math.ceil(d-(d-a)/k);c.style.height=a+"px"}else{window.clearInterval(f)}}else{i.src="../images/android_zhankai.png";if(a>b){var h=Math.ceil((a-b)/g);a=a-h;c.style.height=a+"px"}else{window.clearInterval(f)}}};var f=window.setInterval(e,10)}function requestLogData(f,a,b){var d=""+window.pvparam.pvParam(f,a,b,pagetype);d=d.replace(/\+/g,"%2B");d=d.replace(/\&/g,"%26");try{xmlhttp=new XMLHttpRequest()}catch(c){xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}xmlhttp.open("post",serverUrl+"android/motion.do?m="+d,true);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.send("")}function requestNextDetail(){document.body.scrollTop=0;var p=document.getElementById("adId");var l=document.getElementById("adId").value;var a=0;var f=0;var h=99999;var k=window.sessionStorage;if(k){for(var e=0;e<k.length;e++){var o=k.key(e);if(o==l){f=k.getItem(o).split(",")[4];f=parseInt(f)+1;break}}var b;var n;for(var d=0;d<k.length;d++){var c=k.key(d);var m=k.getItem(c).split(",")[4];var g=k.getItem(c).split(",")[5];if(m<h){h=m;a=c;p.value=a}if(m==f&&catagoryWall==g){a=c;p.value=a;b=k.getItem(a).split(",")[4];n=k.getItem(a).split(",")[5];requestData(a,b,n);break}}}else{window.toast.toast("不支持本地存储")}}function requestData(adId,position,catagory){var toptitle=document.getElementById("toptitle");toptitle.style.position="absolute";var curAdId=document.getElementById("adId");curAdId.value=adId;var params=""+window.adParam.getAdParam(adId,pagetype);params=params.replace(/\+/g,"%2B");params=params.replace(/\&/g,"%26");try{xmlhttp=new XMLHttpRequest()}catch(e){xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState){if(200==xmlhttp.status){var data=eval("("+xmlhttp.responseText+")");initData(adId,data,position,catagory);window.remove.removeLoadingView()}else{window.remove.removeLoadingView()}}};xmlhttp.open("post",serverUrl+"android/ad_detail.do?m="+params,true);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.send("")}function initData(j,v,u,c){positionWall=u;deleteDiv("bottomId");deleteDiv("bottomId2");createBottomDiv(document.getElementById("detailjifen"),"bottomId",u);createBottomDiv(document.getElementById("othercontent"),"bottomId2",u);if(window.orientation==0||window.orientation==180){document.getElementById("blank").style.display="block";document.getElementById("bottomId").style.display="block";document.getElementById("bottomId2").style.display="none"}else{if(window.orientation==90||window.orientation==-90){document.getElementById("blank").style.display="none";document.getElementById("bottomId").style.display="none";document.getElementById("bottomId2").style.display="block"}}var b=document.getElementById("logo");b.onerror=function(){this.src="../images/android_defaultlogo.png"};var x=document.getElementById("title");var p=document.getElementById("catagory");var n=document.getElementById("update_version");var i=document.getElementById("bbb");var g=document.getElementById("icon1");var f=document.getElementById("icon2");var e=document.getElementById("icon3");var o=document.getElementById("wordtitle");o.innerHTML=v.data.adDetail.detail_first;var l=document.getElementById("toptitle");l.style.position="fixed";var m=document.getElementById("detailintroduce");if(pagetype==1||pagetype==6){m.style.display="none"}else{m.innerHTML=v.data.adDetail.score_msg}b.src=v.data.adDetail.detail_icon_Url;x.innerHTML=v.data.adDetail.detail_first;p.innerHTML=v.data.adDetail.category_name.substring(3)+"|"+v.data.adDetail.detail_fourth.substring(3);n.innerHTML=v.data.adDetail.detail_second;var d=v.data.adDetail.resourceUrl.lastIndexOf("/");var s=v.data.adDetail.resourceUrl.substring(d+1);isInstalled(v.data.adDetail.resourceSize,s,v.data.adDetail.isDownload,v.data.adDetail.packageName,u,c);var a=document.getElementById("bigDownload"+u);if(a){a.addEventListener("click",function(){downloadApp(j,v,"downbgroung",u,c,s)},false)}var q=document.getElementById("bigDownloadland"+u);if(q){q.addEventListener("click",function(){downloadApp(j,v,"downbgroungland",u,c,s)},false)}i.innerHTML=v.data.adDetail.detail_seventh;var h=document.getElementById("extendImage");var k=document.getElementById("bbb");h.src="../images/android_zhankai.png";k.style.height="75px";if(v.data.adDetail.adDetailPicture.length>0){g.src=v.data.adDetail.adDetailPicture[0].detail_picture_Url;f.src=v.data.adDetail.adDetailPicture[1].detail_picture_Url;e.src=v.data.adDetail.adDetailPicture[2].detail_picture_Url;var w=document.getElementById("item1");if(w){EventUtil.removeEvent(w,"click",function(){showBigImage(v.data.adDetail.adDetailPicture[0].detail_picture_Url)});EventUtil.addEvent(w,"click",function(){showBigImage(v.data.adDetail.adDetailPicture[0].detail_picture_Url)})}var t=document.getElementById("item2");if(t){EventUtil.removeEvent(t,"click",function(){showBigImage(v.data.adDetail.adDetailPicture[1].detail_picture_Url)});EventUtil.addEvent(t,"click",function(){showBigImage(v.data.adDetail.adDetailPicture[1].detail_picture_Url)})}var r=document.getElementById("item3");if(r){EventUtil.removeEvent(r,"click",function(){showBigImage(v.data.adDetail.adDetailPicture[2].detail_picture_Url)});EventUtil.addEvent(r,"click",function(){showBigImage(v.data.adDetail.adDetailPicture[2].detail_picture_Url)})}}getFourItem(j,c)}function showBigImage(a){document.body.scrollTop=0;var b=document.getElementById("largeImage");b.src=a;setTimeout(function(){var c=document.getElementById("big_image");c.style.display="inline";isPop=true},1000)}function dismiss(b){var a=document.getElementById("big_image");if(a.style.display=="inline"){a.style.display="none";isPop=false}}function downloadApp(b,e,d,a,c,h){if(window.installed.isInstalled(e.data.adDetail.packageName)){window.open.openApp(e.data.adDetail.packageName);if(g!=0&&g!=-1&&(parseInt(signstatus)+1)>=g&&!isSigned){isSigned=true;window.score.addScore(b)}}else{var g=e.data.adDetail.isDownload;var f=document.getElementById(d+a);f.style.backgroundColor="#313131";window.wall.clickOnAndroid(e.data.adDetail.resourceUrl,b,e.data.adDetail.detail_first,e.data.adDetail.packageName,pagetype+","+a+","+c,e.data.adDetail.resourceSize,g,signstatus);if(window.loaded.isLoaded(e.data.adDetail.resourceSize,h)){requestLogData(b,"",5,pagetype)}}}function getFourItem(e,b){var u=window.sessionStorage;var p=document.getElementById("otherimage1");var k=document.getElementById("otherword1");var n=document.getElementById("otherimage2");var h=document.getElementById("otherword2");var l=document.getElementById("otherimage3");var g=document.getElementById("otherword3");var j=document.getElementById("otherimage4");var f=document.getElementById("otherword4");k.innerHTML="";h.innerHTML="";g.innerHTML="";f.innerHTML="";if(u){for(var s=0;s<u.length;s++){var y=u.key(s);var w=u.getItem(y).split(",")[5];if(f.innerHTML!=""){break}if(y!=e&&!isNaN(y)&&w==b){var v=u.getItem(y);var c=v.split(",");if(k.innerHTML==""){var t=y;p.src=c[1];p.onerror=function(){this.src="../images/android_defaultlogo.png"};k.innerHTML=c[0];var x=document.getElementById("otherfirst");if(x){EventUtil.removeEvent(x,"click",function(){gotoDetail(t,c[2],c[3],c[0],c[4],c[5])});EventUtil.addEvent(x,"click",function(){gotoDetail(t,c[2],c[3],c[0],c[4],c[5])})}}else{if(h.innerHTML==""){var q=y;n.src=c[1];n.onerror=function(){this.src="../images/android_defaultlogo.png"};h.innerHTML=c[0];var r=document.getElementById("othersecond");if(r){EventUtil.removeEvent(r,"click",function(){gotoDetail(q,c[2],c[3],c[0],c[4],c[5])});EventUtil.addEvent(r,"click",function(){gotoDetail(q,c[2],c[3],c[0],c[4],c[5])})}}else{if(g.innerHTML==""){var o=y;l.src=c[1];l.onerror=function(){this.src="../images/android_defaultlogo.png"};g.innerHTML=c[0];var d=document.getElementById("otherthird");if(d){EventUtil.removeEvent(d,"click",function(){gotoDetail(o,c[2],c[3],c[0],c[4],c[5])});EventUtil.addEvent(d,"click",function(){gotoDetail(o,c[2],c[3],c[0],c[4],c[5])})}}else{if(f.innerHTML==""){var m=y;j.src=c[1];j.onerror=function(){this.src="../images/android_defaultlogo.png"};f.innerHTML=c[0];var a=document.getElementById("otherfouth");if(a){EventUtil.removeEvent(a,"click",function(){gotoDetail(m,c[2],c[3],c[0],c[4],c[5])});EventUtil.addEvent(a,"click",function(){gotoDetail(m,c[2],c[3],c[0],c[4],c[5])})}}}}}}else{continue}}var x=document.getElementById("otherfirst");var r=document.getElementById("othersecond");var d=document.getElementById("otherthird");var a=document.getElementById("otherfouth");if(k.innerHTML==""){x.style.display="none"}else{x.style.display=""}if(h.innerHTML==""){r.style.display="none"}else{r.style.display=""}if(g.innerHTML==""){d.style.display="none"}else{d.style.display=""}if(f.innerHTML==""){a.style.display="none"}else{a.style.display=""}}else{window.toast.toast("这个浏览器不支持本地存储")}}function gotoDetail(d,b,f,c,a,e){if(b==0){document.body.scrollTop=0;requestData(d,a,e)}else{var g=document.getElementById("wordtitle");g.innerHTML=c;document.body.scrollTop=0;window.location.href=f}}function goBack(){if(isPop){document.getElementById("big_image").style.display="none";isPop=false}else{history.go(-1)}}function getParamters(){var c=window.location.search;var b=c.indexOf("?");if(b==-1){return""}c=c.substring(b+1);var d=new Array();d=c.split("&");paramId=d[0].substring(5);signstatus=d[1].substring(d[1].length-1);var a=document.getElementById("wordtitle");a.innerHTML=decodeURI(d[2]).substring(6);pagetype=d[3].substring(d[3].length-1);positionWall=d[4].substring(9);catagoryWall=d[5].substring(9)}function loadData(){getParamters();requestData(paramId,positionWall,catagoryWall);window.remove.removeLoadingView()}function isInstalled(d,c,i,a,f,e){var j=document.getElementById("downloadword"+f);var b=document.getElementById("downloadwordland"+f);if(pagetype==0){if(signstatus>0){if(window.installed.isInstalled(a)){if(i==-1||(i!=0&&(parseInt(signstatus)+1)>=i)){j.innerHTML="签到";b.innerHTML="签到"}else{j.innerHTML="打开";b.innerHTML="打开"}}else{if(i==-1||(i!=0&&(parseInt(signstatus)+1)>=i)){j.innerHTML="签到";b.innerHTML="签到"}else{if(i==0){if(window.loaded.isLoaded(d,c)){var h=document.getElementById("downsecond"+f);var g=document.getElementById("downsecondland"+f);if(h){h.style.width="50%"}if(g){g.style.width="50%"}j.innerHTML="安装";b.innerHTML="安装"}else{j.innerHTML="免费下载";b.innerHTML="免费下载"}}else{j.innerHTML="打开";b.innerHTML="打开"}}}}else{if(i==0){if(window.loaded.isLoaded(d,c)){var h=document.getElementById("downsecond"+f);var g=document.getElementById("downsecondland"+f);if(h){h.style.width="50%"}if(g){g.style.width="50%"}j.innerHTML="安装";b.innerHTML="安装"}else{j.innerHTML="免费下载";b.innerHTML="免费下载"}}else{if(window.installed.isInstalled(a)){j.innerHTML="打开";b.innerHTML="打开"}else{j.innerHTML="签到";b.innerHTML="签到"}}}}else{if(pagetype==1||pagetype==6){if(window.installed.isInstalled(a)){j.innerHTML="打开";b.innerHTML="打开"}else{if(window.loaded.isLoaded(d,c)){var h=document.getElementById("downsecond"+f);var g=document.getElementById("downsecondland"+f);if(h){h.style.width="50%"}if(g){g.style.width="50%"}j.innerHTML="安装";b.innerHTML="安装"}else{j.innerHTML="免费下载";b.innerHTML="免费下载"}}}}}function updateProgress(e,c,b){var a=document.getElementById("downbgroung"+c);if(a){a.style.backgroundColor="#313131"}var k=document.getElementById("downbgroungland"+c);if(k){k.style.backgroundColor="#313131"}var i=document.getElementById("downloadword"+c);var j=document.getElementById("downloadwordland"+c);var f=e*50;var h=document.getElementById("downsecond"+c);var g=document.getElementById("downsecondland"+c);if(h){h.style.width=f+"%"}if(g){g.style.width=f+"%"}var d=e*100;if(d<10){perString=d.toString().substring(0,1)}else{if(d>=10&&d<100){perString=d.toString().substring(0,2)}else{if(d>=100){perString=d.toString().substring(0,3)}}}if(i){i.innerHTML=perString+"%"}if(j){j.innerHTML=perString+"%"}if(e>=1){updateWord(c,i);updateWord(c,j)}}function updateWord(a,b){if(b){b.innerHTML="安装"}}function backDefault(a,d){var c=document.getElementById("bottomId");c.style.position="absolute";var f=document.getElementById("downbgroung"+a);if(f){f.style.backgroundColor="#3489e4"}var g=document.getElementById("downbgroungland"+a);if(g){g.style.backgroundColor="#3489e4"}var e=document.getElementById("downloadword"+a);var b=document.getElementById("downloadwordland"+a);if(e){e.innerHTML="免费下载"}if(b){b.innerHTML="免费下载"}c.style.position="fixed"}function changeState(d,g,c){var h=document.getElementById("downloadword"+d);var a=document.getElementById("downloadwordland"+d);var e=document.getElementById("downsecond"+d);var f=document.getElementById("downsecondland"+d);if(e){e.style.width="0"}if(f){f.style.width="0"}var b=document.getElementById("downbgroung"+d);if(b){b.style.backgroundColor="#3489e4"}var i=document.getElementById("downbgroungland"+d);if(i){i.style.backgroundColor="#3489e4"}if(h){h.innerHTML="打开"}if(a){a.innerHTML="打开"}}function deleteDiv(a){var b=document.getElementById(a);if(b!=null){b.parentNode.removeChild(b)}}function insertAfter(c,a){var b=a.parentNode;if(b.lastChild==a){b.appendChild(c)}else{b.insertBefore(c,a.nextSibling)}}function createBottomDiv(d,c,b){var a=document.createElement("div");a.setAttribute("id",c);if(c=="bottomId"){a.innerHTML="<div class='downbgroung' id='downbgroung"+b+"'></div><div class='downsecond' id='downsecond"+b+"'></div><div id='bigDownload"+b+"' class='bigdownload'><span id='downloadword"+b+"' class='downloadword'>免费下载</span></div>"}else{if(c=="bottomId2"){a.innerHTML="<div class='downbgroung' id='downbgroungland"+b+"'></div><div class='downsecond2' id='downsecondland"+b+"'></div><div id='bigDownloadland"+b+"' class='bigdownload2'><span id='downloadwordland"+b+"' class='downloadword'>免费下载</span></div>"}}insertAfter(a,d)}function orientationChange(){if(window.orientation==0||window.orientation==180){var c=document.getElementById("blank");if(c){c.style.display="block"}var a=document.getElementById("bottomId");if(a){a.style.display="block"}var b=document.getElementById("bottomId2");if(b){b.style.display="none"}}else{if(window.orientation==90||window.orientation==-90){var c=document.getElementById("blank");if(c){c.style.display="none"}var a=document.getElementById("bottomId");if(a){a.style.display="none"}var b=document.getElementById("bottomId2");if(b){b.style.display="block"}}}}window.addEventListener("onorientationchange" in window?"orientationchange":"resize",orientationChange,false);