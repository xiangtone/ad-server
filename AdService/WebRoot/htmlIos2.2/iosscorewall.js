var pageNo=1;var pageCount=0;var TpageSize=10;var recPageNo=1;var recPageCount=0;var item;var isBottom=0;function homeback(a){document.location="back://///back"}function help(a){document.location="help://///help"}function feedback(a){document.location="feedback://///feedback"}function requestData(pageType,pageSize,params){var xmlhttp;document.location="start://///start";serverUrl="/AdService/";params=params.replace(/\+/g,"%2B");params=params.replace(/\&/g,"%26");try{xmlhttp=new XMLHttpRequest()}catch(e){xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}xmlhttp.open("post",serverUrl+"ios/ad_picker.do?map="+params,true);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState){if(200==xmlhttp.status){var data=eval("("+xmlhttp.responseText+")");if(data.data.adList==undefined){document.getElementById("itemtitle1").style.display="";document.location="finish://///finish";return}scoreWall(data,pageSize);document.location="finish://///finish"}else{document.location="alert://///"+encodeURIComponent("积分墙请求错误")}}};xmlhttp.send("")}function requestHotData(b,a,c){}function dataUndefined(a){if(a.data.adList==undefined){return}}function scoreWall(e,a){dataUndefined(e);pageCount=e.data.wallPage.pageCount;var d=e.data.adList;if(d.length>0){for(var c in d){var b=(pageNo-1)*a+parseInt(c);drawItem(b,d[c],0)}}pageNo++}function scoreWall2(e,a){dataUndefined(e);recPageCount=e.data.wallPage.pageCount;var d=e.data.adList;if(d.length>0){for(var c in d){var b=(recPageNo-1)*a+parseInt(c);drawItem2(b,d[c],0)}}recPageNo++}function drawItem2(d,h,c){var b=document.createElement("div");b.setAttribute("class","box");b.setAttribute("id","box2"+d);var l=document.createElement("div");l.setAttribute("class","boxLM");l.setAttribute("id","boxLM2"+d);var a=document.createElement("div");a.setAttribute("class","boxL");a.setAttribute("id","boxL2");var m=document.createElement("img");m.setAttribute("class","logo");m.setAttribute("src",h.general.wall_icon_Url);a.appendChild(m);var i=document.createElement("div");i.setAttribute("class","boxM");i.setAttribute("id","boxM2");i.innerHTML="<div id='title2"+d+"' class='title_reco'>"+h.title+"</div><div id='desc2"+d+"' class='desc_reco'>"+h.general.wall_desc+"</div>";var f=document.createElement("div");f.setAttribute("class","boxR");f.setAttribute("id","boxR2"+d);var e=document.createElement("div");e.setAttribute("class","downbgroung2");e.setAttribute("id","downbgroung2"+d);e.innerHTML="免费";f.appendChild(e);b.addEventListener("click",function(){downloadFile(h.ad_type,h.ad_url,h.app_url,h.id,d,h.apple_id,"6",h.appid,h.is_url_params,h.url_params,h.general.wall_icon_Url)},false);l.appendChild(a);l.appendChild(i);b.appendChild(l);b.appendChild(f);var k=document.createElement("div");k.setAttribute("class","divider_up");var g=document.createElement("div");g.setAttribute("class","divider_bottom");b.appendChild(k);b.appendChild(g);var j=document.getElementById("wall_list2");j.appendChild(b)}function drawItem(g,m,e){var b=document.createElement("div");b.setAttribute("class","box");b.setAttribute("id","box"+g);var p=document.createElement("div");p.setAttribute("class","boxLM");p.setAttribute("id","boxLM"+g);var a=document.createElement("div");a.setAttribute("class","boxL");a.setAttribute("id","boxL");var q=document.createElement("img");q.setAttribute("class","logo");q.setAttribute("src",m.general.wall_icon_Url);a.appendChild(q);var n=document.createElement("div");n.setAttribute("class","boxM");n.setAttribute("id","boxM");n.innerHTML="<div id='title"+g+"' class='title'>"+m.title+"</div><div id='catagory"+g+"' class='catagory'>"+m.general.wall_desc+"</div><div id='desc"+g+"' class='desc'>"+m.score_msg+"</div>";var i=document.createElement("div");i.setAttribute("class","boxR");i.setAttribute("id","boxR"+g);var c=document.createElement("div");var l=document.createElement("div");l.setAttribute("id","downTop"+g);l.setAttribute("class","downTop");l.innerHTML="<span class='downloadplus'></span><span class='downjifen'>+"+m.general.score+"</span>";var f=document.createElement("div");f.setAttribute("class","downMiddle");f.setAttribute("id","downMiddle"+g);f.innerHTML="<span class='downjinbi'>"+m.general.scoreUnit+"</span>";var h=document.createElement("div");h.setAttribute("class","downBottom");h.setAttribute("id","downBottom"+g);h.innerHTML="<div class='downbgroung' id='downbgroung"+g+"'>";c.appendChild(l);c.appendChild(f);c.appendChild(h);i.appendChild(c);b.addEventListener("click",function(){downloadFile(m,m.ad_type,m.ad_url,m.app_url,m.id,g,m.apple_id,"0",m.appid,m.is_url_params,m.url_params,m.title,m.score_msg,m.general.wall_icon_Url)},false);p.appendChild(a);p.appendChild(n);b.appendChild(p);b.appendChild(i);var k=document.getElementById("divider0");var o=document.createElement("div");o.setAttribute("class","divider_up");var j=document.createElement("div");j.setAttribute("class","divider_bottom");var d=parseInt(g)+parseInt(1);j.setAttribute("id","divider"+d);insertAfter(b,k);insertAfter(o,b);insertAfter(j,o)}function insertAfter(c,a){var b=a.parentNode;if(b.lastChild==a){b.appendChild(c)}else{b.appendChild(c)}}function downloadFile(h,b,g,e,a,f,i,d,l,c,k,j,n,m){if(b==4){item=h;document.getElementById("dg2").style.display="";document.getElementById("alertback").style.display="";document.getElementById("ad_name_b").innerHTML=j;document.getElementById("desc0").innerHTML=n;document.getElementById("logo_b").src=m;document.getElementById("weixin_desc").innerHTML=item.search_desc;document.getElementById("code_b").innerHTML=item.keyword}else{document.location="objc://///yjfdown:////&"+b+":////&"+g+":////&"+e+":////&"+a+":////&"+i+":////&"+d+":////&"+l+":////&"+c+":////&"+k}}function keywordcopy(){document.location="objc://///yjfdown:////&"+item.ad_type+":////&"+item.ad_url+":////&"+item.app_url+":////&"+item.id+":////&"+item.apple_id+":////&0:////&"+item.appid+":////&"+item.is_url_params+":////&"+item.url_params}window.onscroll=function(){if((document.body.scrollHeight-(document.documentElement.clientHeight+document.body.scrollTop))==0){if(isBottom==0){if(pageNo<=pageCount){document.location="objc://///requestData:////&"+pageNo+":////&"+0+":////&"+0+":////&"+0}}}};function createDivider(d,c){var a=document.createElement("div");a.setAttribute("id",d);a.innerHTML="<div class='divider_up'></div><div class='divider_bottom'></div>";var b=document.getElementById(c);b.appendChild(a)};