var pageNo=1;var pageCount=0;var xmlhttp;function homeback(){document.location="back://///back"}function requestData(pageType,pageSize,params){document.location="start://///";serverUrl="/AdService/";params=params.replace(/\+/g,"%2B");params=params.replace(/\&/g,"%26");try{xmlhttp=new XMLHttpRequest()}catch(e){xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}xmlhttp.open("post",serverUrl+"ios/ad_picker.do?map="+params,true);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState){if(200==xmlhttp.status){var data=eval("("+xmlhttp.responseText+")");if(data.data.adList==undefined){document.getElementById("itemtitle1").style.display="";document.location="finish://///";return}pageCount=data.data.wallPage.pageCount;var list=data.data.adList;if(list.length>0){for(var i in list){var index=(pageNo-1)*pageSize+parseInt(i);drawItem(index,list[i])}}pageNo++;document.location="finish://///"}}};xmlhttp.send("")}function drawItem(g,k){var c=document.createElement("div");c.setAttribute("class","box");c.setAttribute("id","box"+g);var m=document.createElement("div");m.setAttribute("class","boxLM");m.setAttribute("id","boxLM"+g);var a=document.createElement("div");a.setAttribute("class","boxL");a.setAttribute("id","boxL");var n=document.createElement("img");n.setAttribute("class","logo");n.setAttribute("src",k.general.wall_icon_Url);a.appendChild(n);var l=document.createElement("div");l.setAttribute("class","boxM");l.setAttribute("id","boxM");l.innerHTML="<div id='title"+g+"' class='title'>"+k.title+"</div><div id='desc"+g+"' class='desc'>"+k.general.wall_desc+"</div>";var i=document.createElement("div");i.setAttribute("class","boxR");i.setAttribute("id","boxR2"+g);var b=document.createElement("div");b.setAttribute("class","downbgroungIcon");var h=document.createElement("div");h.setAttribute("class","downbgroung2");h.setAttribute("id","downbgroung2"+g);if(k.ad_type==1){h.innerHTML="打开详情"}else{h.innerHTML="免费下载"}i.appendChild(b);i.appendChild(h);c.addEventListener("click",function(){downloadFile(k.ad_type,k.ad_url,k.app_url,k.id,g,k.apple_id,k.appid,k.is_url_params,k.url_params)},false);m.appendChild(a);m.appendChild(l);c.appendChild(m);c.appendChild(i);var j="divider"+g;var f=document.getElementById(j);var d=document.createElement("div");d.setAttribute("class","divider");var e=parseInt(g)+parseInt(1);d.setAttribute("id","divider"+e);insertAfter(c,f);insertAfter(d,c)}function insertAfter(c,a){var b=a.parentNode;if(b.lastChild==a){b.appendChild(c)}else{b.insertBefore(c,a.nextSibling)}}function downloadFile(b,f,d,a,e,g,i,c,h){document.location="objc://///yjfdown:////&"+b+":////&"+f+":////&"+d+":////&"+a+":////&"+g+":////&"+i+":////&"+c+":////&"+h}window.onscroll=function(){if((document.body.scrollHeight-(document.documentElement.clientHeight+document.body.scrollTop))==0){if(pageNo<=pageCount){document.location="objc://///requestData:////&"+pageNo+":////&"+0+":////&"+0+":////&"+0}}};