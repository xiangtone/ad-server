package cn.adwalker.ad.controller;import javax.annotation.Resource;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import cn.adwalker.ad.exception.ExceptionCode;import cn.adwalker.ad.param.AcParam;import cn.adwalker.ad.picker.util.ParamHandler;import cn.adwalker.ad.picker.util.VoValicate;import cn.adwalker.ad.service.IPageActionService;import cn.adwalker.ad.util.AppConstant;import cn.adwalker.ad.util.ConfigUtil;import cn.adwalker.ad.util.PublicUtil;/** * * <p>Title: PageActionController</p>* <p>Description:TODO</p>* <p>Company: adwalker</p> * @author   lichuang* @date       2013-1-10 */@Controllerpublic class PageActionController {		public final static int CACHE_TIME = Integer.parseInt(ConfigUtil.getString("cache_time"));	@Resource	private IPageActionService pageActionService;	/**	 * 记录广告墙动作	 * @return	 */	@RequestMapping("/android/motion.do")	public void androidMotion(HttpServletRequest request,HttpServletResponse response) {		//long start = System.currentTimeMillis();		//log.info("/android/uuid_actionlogE.do");		ParamHandler h = ParamHandler.createParamHandler(response, request);		AcParam pvo = h.paramConvent(AcParam.class, "paramMap");		if(!h.hasError()){			pvo.setBannerTag(pvo.getBannerTag()==null?0:pvo.getBannerTag());			pageActionService.adMotion(pvo, AppConstant.OS_ANDROID);			PublicUtil.returnValue(response, AppConstant.STATUS_OK, null);		}else{			PublicUtil.returnValue(response, AppConstant.STATUS_ERROR, PublicUtil.installErrorVO(ExceptionCode.REQUEST_PARAM_INVALID));		}	}	/**	 *IOS 记录广告墙动作	 * @return	 */	@RequestMapping("/ios/motion.do")	public void iosMotion(HttpServletRequest request,HttpServletResponse response) {		ParamHandler h = ParamHandler.createParamHandler(response, request);		AcParam pvo = h.paramConvent(AcParam.class, "paramsMap");		if(!h.hasError()){			VoValicate.changeUuid(pvo);			pvo.setBannerTag(pvo.getBannerTag()==null?0:pvo.getBannerTag());			pageActionService.adMotion(pvo, AppConstant.OS_IOS);			PublicUtil.returnValue(response, AppConstant.STATUS_OK, null);		}else{			PublicUtil.returnValue(response, AppConstant.STATUS_ERROR, PublicUtil.installErrorVO(ExceptionCode.REQUEST_PARAM_INVALID));		}	}		}