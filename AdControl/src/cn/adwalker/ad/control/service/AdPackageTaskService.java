package cn.adwalker.ad.control.service;import java.util.Date;import javax.annotation.Resource;import org.apache.log4j.Logger;import org.springframework.context.ApplicationContext;import org.springframework.context.support.FileSystemXmlApplicationContext;import org.springframework.stereotype.Repository;import cn.adwalker.ad.control.dao.AdPackageDao;import cn.adwalker.ad.control.util.DateUtils;@Repository("adPackageTaskService")public class AdPackageTaskService {	private static Logger logger = Logger.getLogger(AdPackageTaskService.class);	@Resource	private AdPackageDao adPackageDao;		//系统定时任务调用	public void doTask() throws Exception {		logger.info("开始---doTask");		Date date = new Date();		dataMain(DateUtils.format(date));		logger.info("结束---doTask");	}	//测试调用	public void doTask(String date) throws Exception {		dataMain(date);	}		//--定时记录广告的包，单价等信息 	public void dataMain(String date) throws Exception {				if (date != null) {			logger.debug("adPackageTask run...");			adPackageDao.update(date);					}	} 			//手动跑数据		public static void main(String[] args) throws Exception {										ApplicationContext context = new FileSystemXmlApplicationContext(new String[] { "WebContent/WEB-INF/applicationContext.xml" });				AdPackageTaskService service = (AdPackageTaskService) context.getBean("adPackageTaskService");				service.dataMain("2014-11-19");				}	}